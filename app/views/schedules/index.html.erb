<!DOCTYPE html>
<html>
  <head>
    <title>Schedule</title>
  </head>

  <main class="d-flex justify-content-center w-100 h-75 d-inline-block align-self-center bg-light">
    <div class="d-flex flex-column">

    <div class="mb-auto">
        <p id="notice"><%= notice %></p>
        <h1>Schedule</h1>
    </div>


    <div class="course-list h-75">
        <table>
          <thead>
            <tr>
              <th colspan="3"></th>
            </tr>
          </thead>
          <thead>
            <tr>
              <th>Year</th>
              <th>Semester</th>
              <th>Course</th>
            </tr>
          </thead>
          <tbody>
            <% @courses.each do |course| %>
              <tr>
                <td>
                  <%= course.year %>
                </td>
                <td>
                  <%= course.semester %>
                </td>
                <td>
                  <%= course.course_identifier %> <%= course.course_name %>
                </td>
                <td>
                    <%= course.start_time_1 %> <%= course.end_time_1 %>
              </tr>
            <% end %>
          </tbody>
        </table>
    </div>

    <%= month_calendar(attribute: :start_time_1, end_attribute: :end_time_1, events: @courses) do |date, courses| %>
        <%= date %>
        <% courses.each do |course| %>
            <div>
                <%= course.course_identifier %>
                <%= course.start_time_1 %> - <%= course.end_time_1 %>
            </div>
        <% end %>
    <% end %>

    <%= week_calendar(attribute: :start_time_1, end_attribute: :end_time_1, events: @courses) do |date, courses| %>
        <% 7.upto(23).each do |hour| %>
            <div>
                <%= Time.parse("#{hour}:00").strftime("%l%P") %>
            </div>
            <div>
                <%= courses.each do |course| %>
                    <%= course.course_identifier %>
                <% end %>
            </div>
        <% end %>
    <% end %>


    <footer class="mt-auto pb-3">
        <% if params[:id] %>
            <%= link_to 'Back', '/students/' + params[:id], :class => 'btn btn-secondary' %>
        <% else %>
            <%= link_to 'Back', students_path, :class => 'btn btn-secondary' %>
        <% end %>
    </footer>

    </div>
    </main>

</html>